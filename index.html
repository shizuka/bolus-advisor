---
---
<!--
  Bolus Advisor
  by Shizuka Kamishima
  Generated on {{ site.time | date: '%F' }} by Jekyll
-->
<!DOCTYPE html>
<html lang="en" ng-app="bolus-advisor">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=355, initial-scale=1.0">
  <title>{{ site.title }}</title>
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
  <script src="assets/js/app.js"></script>
</head>
<body>
  <div id="wrapper">
    
    <header>
      <h1 class="title">
        {{ site.title }}
      </h1>
      
      <nav>
        <ul>
          <li><a href="#settings" title="Settings"><i class="fa fa-gear"></i></a></li>
          <li><a href="#info" title="Information"><i class="fa fa-info-circle"></i></a></li>
        </ul>
      </nav>
    </header>
    
    <hr class="sep">
    
    <div id="bolus-advisor" ng-controller="AdvisorController as advisor" ng-init="advisor.updateBolus()">
      
      <div id="in_bg" class="box">
        <h2>bG Level</h2>
        <input type="number" min="0" max="400" ng-model="advisor.currentBG" ng-change="advisor.updateBolus()"><span ng-bind="advisor.opts.units.bg"></span>
        <div class="midcap">
          <div id="bgrange" ng-class="advisor.bgRange" ng-bind="advisor.bgRange"></div>
        </div>
        <div class="endcap">
          <span ng-bind="advisor.bolus.bg"></span>u
        </div>
      </div>
      <div id="in_carbs" class="box">
        <h2>Carbs</h2>
        <input type="number" id="carbs" min="0" ng-model="advisor.carbs" ng-change="advisor.updateBolus()"><span ng-bind="advisor.opts.units.carbs"></span>
        <div class="midcap">
          <span class="head">Ratio</span> <br>
          <strong ng-bind="advisor.opts.carbRatio.insulin"></strong>u / <strong ng-bind="advisor.opts.carbRatio.carbs"></strong><span ng-bind="advisor.opts.units.carbs"></span>
        </div>
        <div class="endcap">
          <span ng-bind="advisor.bolus.carb"></span>u
        </div>
      </div>
      <div id="out_bolus" class="box">
        <h2>Bolus</h2>
        <div class="value"><output id="bolus" ng-bind="advisor.bolus.final"></output>u</div>
      </div>
      
      <hr class="sep">
      
      <div id="settings" class="box">
        <h2>Settings</h2>
        <button id="clearsettings" ng-click="advisor.loadSettings()">Clear All</button>
        <fieldset class="units">
          <legend>Units</legend>
          <ul class="units">
            <li>
              <label for="bgunits">
                bG Units:
                <select name="bG Units" id="bgunits" ng-model="advisor.opts.units.bg" ng-change="advisor.updateBolus()">
                  <option value="mg/dL">mg/dL</option>
                  <option value="mmol/L">mmol/L</option>
                </select>
              </label>
            </li>
            <li>
              <label for="carbunits">
                Carb Units:
                <select name="Carb Units" id="carbunits" ng-model="advisor.opts.units.carbs" ng-change="advisor.updateBolus()">
                  <option value="g">g - Grams</option>
                  <option value="KE">KE - Kohlenhydrateinheit (10g)</option>
                  <option value="BE">BE - Bread Equivalent (12g)</option>
                  <option value="CC">CC - Carbohydrate Choice (15g)</option>
                </select>
              </label>
            </li>
            <li>
              <label for="carbratio">
                Carb Ratio:
                <input type="number" id="cr_insulin" min="0" ng-model="advisor.opts.carbRatio.insulin" ng-change="advisor.updateBolus()">u
                per <input type="number" id="cr_carbs" min="0" ng-model="advisor.opts.carbRatio.carbs" ng-change="advisor.updateBolus()">
                <span ng-bind="advisor.opts.units.carbs"></span>
              </label>
            </li>
            <li>
              <label for="sensitivity">
                Sensitivity:
                <input type="number" id="is_insulin" min="0" ng-model="advisor.opts.insulinSensitivity.insulin" ng-change="advisor.updateBolus()">u 
                lowers <input type="number" id="is_bg" min="0" max="400" ng-model="advisor.opts.insulinSensitivity.bgDrop" ng-change="advisor.updateBolus()">
                <span ng-bind="advisor.opts.units.bg"></span>
              </label>
            </li>
          </ul>
        </fieldset>
        <fieldset class="levels">
          <legend>bG Thresholds</legend>
          <ul>
            <li>
              <label for="hyperlimit"> Hyper:
                <input type="number" id="hyperlimit" min="0" max="400" ng-model="advisor.opts.bgLevels.hyper" ng-change="advisor.updateBolus()">
                <span ng-bind="advisor.opts.units.bg"></span>
              </label>
            </li>
            <li>
              <label for="high"> High:
                <input type="number" id="high" min="0" max="400" ng-model="advisor.opts.bgLevels.high" ng-change="advisor.updateBolus()">
                <span ng-bind="advisor.opts.units.bg"></span>
              </label>
            </li>
            <li>
              <label for="low"> Low:
                <input type="number" id="low" min="0" max="400" ng-model="advisor.opts.bgLevels.low" ng-change="advisor.updateBolus()">
                <span ng-bind="advisor.opts.units.bg"></span>
              </label>
            </li>
            <li>
              <label for="hypolimit"> Hypo:
                <input type="number" min="0" max="400" ng-model="advisor.opts.bgLevels.hypo" ng-change="advisor.updateBolus()">
                <span ng-bind="advisor.opts.units.bg"></span>
              </label>
            </li>
          </ul>
        </fieldset>
      </div> <!-- #settings -->
      
    </div> <!-- #bolus-advisor -->
      
    <hr class="sep">
    
    <a id="info"></a>
    
    <div class="warning box">
      <h2><i class="fa fa-warning"></i> USE AT YOUR OWN RISK</h2>
      <p>This page is intended for use by patients with Diabetes Mellitus, who
        are trained in multiple daily insulin injection therapy, and are under
        the supervision of healthcare professionals experienced in managing
        insulin-treated patients. It provides direction for insulin adjustment
        within the scope of a pre-planned treatment program from a healthcare
        professional.
      </p>
      <p><strong>IN OTHER WORDS, I am not a doctor,</strong> this page is not
      a doctor, and you should ask <em>yours</em> about consulting an advisor
      like this before making changes to your insulin regimen. You will need
      to set your target glucose ranges, insulin-to-carbohydrate ratio, and
      insulin sensitivity ratio based on discussion with your doctor. 
      </p>
    </div>
    
    <h3>Privacy Notice</h3>
    <p>This page makes use of HTML5 LocalStorage to remember your settings the
      next time you visit, and can be cleared at any time.
      No data is transmitted to the internet, and this page will <em>not</em>
      remember your previous calculations.
    </p>
    
    <h3>Bolus Calculation Algorithm</h3>
    (<abbr title="current blood glucose">bG</abbr>
    - <abbr title="midpoint of target glucose range">Target bG</abbr>)
    * <abbr title="insulin / bG lowered">sensitivity</abbr>
    + <span class="hilight">(<abbr title="carbohydrates eaten">carbs</abbr>
    * <abbr title="insulin / carbs">carb ratio</abbr>)</span></p>
    <p><span class="hilight">Omitted</span> if no carbs input</p>
    <p>For your safety, this page will not operate with blood glucose levels
      exceeding 400 mg/dL (23 mmol/L). <br>
      You should be calling a doctor above that, not me.
    </p>
    
    <h3>About Bolus Advisor</h3>
    <p>I'm a Type 1 Diabetic myself, and was very pleased with the Accu-Chek
      Aviva Expert blood glucose meter. However, after a couple years, I was
      offered the newer, much smaller and lighter, Aviva Connect, which
      doesn't come with the Bolus Advice feature. I use a Dexcom for most of
      my tracking over the day, so wanted to clone the Advice into a
      mobile-friendly page. No ads, no memory, just the raw calculation of how
      much insulin to take.
    </p>
    <p>Because this page has no memory of your calculations, it does <em>not</em>
    know about any onboard insulin, and has no way to compute it. Be careful
    when taking a dose while a previous dose may still be active. Active times
    vary by specific insulins. <em>Consult your doctor!</em></p>
    <p>I hope this page proves useful to you!</p>
    
    <footer>
      <a href="https://github.com/shizuka/bolus-advisor">bolus advisor</a> | <a href="https://twitter.com/kamishizuka">shizuka kamishima</a> | {{ site.time | date: '%F' }} <br>
      rev <span class="revision">{{ site.github.build_revision | slice: 0,7 }}</span>
    </footer>
  </div>
</body>
</html>